{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pranjal Minocha\\\\Documents\\\\python\\\\Pixelo\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://127.0.0.1:8000';\nconst getTodayDateString = () => new Date().toISOString().split('T')[0];\nfunction App() {\n  _s();\n  const [imageUrl, setImageUrl] = useState('');\n  const [guess, setGuess] = useState('');\n  const [history, setHistory] = useState([]);\n  const [message, setMessage] = useState({\n    text: '',\n    type: 'info'\n  });\n  const [gameWon, setGameWon] = useState(false);\n  const [guessCount, setGuessCount] = useState(0);\n  const [totalWords, setTotalWords] = useState(0);\n  const [guessedWords, setGuessedWords] = useState(new Set());\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [showUsernameModal, setShowUsernameModal] = useState(false);\n  const [username, setUsername] = useState('');\n  const [finalRank, setFinalRank] = useState(null);\n  const [lastGameSessionId, setLastGameSessionId] = useState(null);\n  const [copyButtonText, setCopyButtonText] = useState('Share');\n  const [loading, setLoading] = useState(true);\n  const [loadingMessage, setLoadingMessage] = useState('Loading game...');\n  const inputRef = useRef(null);\n  const isInputDisabled = gameWon;\n  useEffect(() => {\n    const loadInitialData = async () => {\n      const timeoutId = setTimeout(() => {\n        setLoadingMessage('Waking up the server... this might take a minute (free tier hosting üòÖ)');\n      }, 3000);\n      try {\n        // Fetch game data and leaderboard concurrently\n        const [gameResponse, leaderboardResponse] = await Promise.all([fetch(`${API_BASE_URL}/api/game/today`), fetch(`${API_BASE_URL}/api/leaderboard/today`)]);\n        clearTimeout(timeoutId);\n        if (!gameResponse.ok) {\n          const errorData = await gameResponse.json();\n          throw new Error(errorData.detail || \"Could not load today's game.\");\n        }\n        const gameData = await gameResponse.json();\n        setImageUrl(`${API_BASE_URL}${gameData.imageUrl}`);\n        setTotalWords(gameData.totalWords);\n        if (leaderboardResponse.ok) {\n          const leaderboardData = await leaderboardResponse.json();\n          setLeaderboard(leaderboardData);\n        }\n      } catch (error) {\n        clearTimeout(timeoutId);\n        setMessage({\n          text: `Error: ${error.message}`,\n          type: 'error'\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadInitialData();\n    const savedUsername = localStorage.getItem('pixeloUsername');\n    if (savedUsername) setUsername(savedUsername);\n  }, []);\n  const handleGuessSubmit = async e => {\n    e.preventDefault();\n    if (isInputDisabled || !guess.trim()) return;\n    const wordToGuess = guess.trim().toLowerCase();\n    if (guessedWords.has(wordToGuess)) {\n      setMessage({\n        text: 'You already guessed that word!',\n        type: 'error'\n      });\n      setGuess('');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/game/guess`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          word: wordToGuess\n        })\n      });\n      const result = await response.json();\n      if (!response.ok) {\n        throw new Error(result.detail || 'Server error occurred.');\n      }\n      if (result.status === 'not_in_list') {\n        setMessage({\n          text: result.message,\n          type: 'error'\n        });\n      } else if (result.status === 'found') {\n        const newGuessCount = guessCount + 1;\n        setGuessCount(newGuessCount);\n        setGuessedWords(new Set(guessedWords).add(wordToGuess));\n        const newHistory = [{\n          word: wordToGuess,\n          rank: result.rank\n        }, ...history];\n        newHistory.sort((a, b) => a.rank - b.rank);\n        setHistory(newHistory);\n        setMessage({\n          text: '',\n          type: 'info'\n        });\n        if (result.isCorrect) {\n          const newSessionId = crypto.randomUUID();\n          setLastGameSessionId(newSessionId);\n\n          // Calculate potential rank based on the current leaderboard\n          const potentialRank = leaderboard.filter(e => e.score <= newGuessCount).length + 1;\n          setFinalRank(potentialRank);\n          setGameWon(true);\n          setMessage({\n            text: `Congratulations! You guessed it in ${newGuessCount} tries!`,\n            type: 'win'\n          });\n          setShowUsernameModal(true);\n        }\n      }\n    } catch (error) {\n      setMessage({\n        text: `Error: ${error.message}`,\n        type: 'error'\n      });\n    } finally {\n      setGuess('');\n      inputRef.current.focus();\n    }\n  };\n  const handleShare = () => {\n    // Use window.location.origin for a clean URL (e.g., https://pixelo.game)\n    const shareText = `I completed today's Pixelo in ${guessCount} guesses. ‚úèÔ∏è Let's see if you can do it in less!\\n${window.location.origin}`;\n    navigator.clipboard.writeText(shareText).then(() => {\n      setCopyButtonText('Copied!');\n      setTimeout(() => setCopyButtonText('Share'), 2000); // Revert after 2 seconds\n    }).catch(err => {\n      console.error('Failed to copy text: ', err);\n      alert('Could not copy score to clipboard.');\n    });\n  };\n  const handleUsernameSubmit = async e => {\n    e.preventDefault();\n    const finalUsername = username.trim();\n    if (!finalUsername) return;\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/leaderboard/submit`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: finalUsername,\n          score: guessCount,\n          sessionId: lastGameSessionId\n        })\n      });\n      const updatedLeaderboard = await response.json();\n      if (response.ok) {\n        localStorage.setItem('pixeloUsername', finalUsername);\n        setLeaderboard(updatedLeaderboard);\n        setShowUsernameModal(false);\n      } else {\n        throw new Error('Failed to submit score.');\n      }\n    } catch (error) {\n      // In a real app, you'd show this error in the modal\n      console.error(error);\n      alert(error.message);\n    }\n  };\n  const getRankColor = useCallback(rank => {\n    if (rank === 0) return 'var(--rank-win)';\n    if (!totalWords) return 'var(--rank-bad)'; // Default color if totalWords isn't loaded\n\n    const percentile = rank / totalWords;\n    if (percentile <= 0.1) return 'var(--rank-good)'; // Top 10%\n    if (percentile <= 0.5) return 'var(--rank-medium)'; // 10% to 50%\n    return 'var(--rank-bad)'; // The rest\n  }, [totalWords]);\n\n  // --- Leaderboard Logic ---\n  const currentUserRank = lastGameSessionId ? leaderboard.findIndex(entry => entry.sessionId === lastGameSessionId) : -1;\n  const top10Leaderboard = leaderboard.slice(0, 10);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showUsernameModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"You won!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this), finalRank && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Your rank today is \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-numeric highlight-rank\",\n            children: finalRank\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 51\n          }, this), \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Add your name to the leaderboard.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUsernameSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            placeholder: \"Enter your name\",\n            maxLength: \"20\",\n            required: true,\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-button-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Submit Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"share-button\",\n              onClick: handleShare,\n              children: copyButtonText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"side-column leaderboard-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Daily Leaderboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this), leaderboard.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"leaderboard-list\",\n          children: top10Leaderboard.map((entry, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentUserRank === index ? 'current-user' : '',\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"leaderboard-rank font-numeric\",\n              children: [index + 1, \".\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"leaderboard-name\",\n              children: [entry.username, index === 0 && ' üèÜ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"leaderboard-score font-numeric\",\n              children: entry.score\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 37\n            }, this)]\n          }, entry.sessionId || `${entry.username}-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-scores\",\n          children: \"No scores yet today. Be the first!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-column\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"header\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Pixelo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Guess the word that inspired this A.I. generated doodle!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n            children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-container\",\n              style: {\n                textAlign: 'center',\n                padding: '2rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: loadingMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-container\",\n                children: imageUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  id: \"doodle-image\",\n                  src: imageUrl,\n                  alt: \"A.I. generated doodle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 53\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Loading image...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 124\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"game-interface\",\n                children: [gameWon ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"share-button-main\",\n                  onClick: handleShare,\n                  children: copyButtonText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n                  id: \"guess-form\",\n                  onSubmit: handleGuessSubmit,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"guess-input\",\n                    ref: inputRef,\n                    value: guess,\n                    onChange: e => setGuess(e.target.value),\n                    placeholder: \"Enter your guess...\",\n                    autoComplete: \"off\",\n                    required: true,\n                    disabled: isInputDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    disabled: isInputDisabled,\n                    children: \"Guess\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"message-area\",\n                  className: `message-${message.type}`,\n                  children: message.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"guess-counter\",\n                style: {\n                  visibility: guessCount > 0 && !gameWon ? 'visible' : 'hidden'\n                },\n                children: [\"Total Guesses: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-numeric\",\n                  children: guessCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 56\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"side-column history-column\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Guess History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-header\",\n            style: {\n              visibility: history.length > 0 ? 'visible' : 'hidden'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"col-word\",\n              children: \"Guess\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"col-rank\",\n              children: \"Rank\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            id: \"history-list\",\n            children: history.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"history-item-word\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rank-color-indicator\",\n                  style: {\n                    backgroundColor: getRankColor(item.rank)\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 89\n                }, this), item.word]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"history-item-rank font-numeric\",\n                style: {\n                  color: getRankColor(item.rank)\n                },\n                children: item.rank === 0 ? 'Correct!' : item.rank\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 206\n              }, this)]\n            }, item.word, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"footer-icon\",\n            role: \"img\",\n            \"aria-label\": \"heart\",\n            children: \"\\u2764\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Inspired by\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://contexto.me/\",\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"Contexto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this), ' ', \"and\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://skribbl.io/\",\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"skribbl.io\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"u5416X/u9SIlquv7M1amEesHMjM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","getTodayDateString","Date","toISOString","split","App","_s","imageUrl","setImageUrl","guess","setGuess","history","setHistory","message","setMessage","text","type","gameWon","setGameWon","guessCount","setGuessCount","totalWords","setTotalWords","guessedWords","setGuessedWords","Set","leaderboard","setLeaderboard","showUsernameModal","setShowUsernameModal","username","setUsername","finalRank","setFinalRank","lastGameSessionId","setLastGameSessionId","copyButtonText","setCopyButtonText","loading","setLoading","loadingMessage","setLoadingMessage","inputRef","isInputDisabled","loadInitialData","timeoutId","setTimeout","gameResponse","leaderboardResponse","Promise","all","fetch","clearTimeout","ok","errorData","json","Error","detail","gameData","leaderboardData","error","savedUsername","localStorage","getItem","handleGuessSubmit","e","preventDefault","trim","wordToGuess","toLowerCase","has","response","method","headers","body","JSON","stringify","word","result","status","newGuessCount","add","newHistory","rank","sort","a","b","isCorrect","newSessionId","crypto","randomUUID","potentialRank","filter","score","length","current","focus","handleShare","shareText","window","location","origin","navigator","clipboard","writeText","then","catch","err","console","alert","handleUsernameSubmit","finalUsername","sessionId","updatedLeaderboard","setItem","getRankColor","percentile","currentUserRank","findIndex","entry","top10Leaderboard","slice","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","placeholder","maxLength","required","autoFocus","onClick","map","index","style","textAlign","padding","id","src","alt","ref","autoComplete","disabled","visibility","item","backgroundColor","color","role","href","rel","_c","$RefreshReg$"],"sources":["C:/Users/Pranjal Minocha/Documents/python/Pixelo/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './App.css';\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://127.0.0.1:8000';\n\nconst getTodayDateString = () => new Date().toISOString().split('T')[0];\n\nfunction App() {\n    const [imageUrl, setImageUrl] = useState('');\n    const [guess, setGuess] = useState('');\n    const [history, setHistory] = useState([]);\n    const [message, setMessage] = useState({ text: '', type: 'info' });\n    const [gameWon, setGameWon] = useState(false);\n    const [guessCount, setGuessCount] = useState(0);\n    const [totalWords, setTotalWords] = useState(0);\n    const [guessedWords, setGuessedWords] = useState(new Set());\n    const [leaderboard, setLeaderboard] = useState([]);\n    const [showUsernameModal, setShowUsernameModal] = useState(false);\n    const [username, setUsername] = useState('');\n    const [finalRank, setFinalRank] = useState(null);\n    const [lastGameSessionId, setLastGameSessionId] = useState(null);\n    const [copyButtonText, setCopyButtonText] = useState('Share');\n    const [loading, setLoading] = useState(true);\n    const [loadingMessage, setLoadingMessage] = useState('Loading game...');\n    const inputRef = useRef(null);\n\n    const isInputDisabled = gameWon;\n\n    useEffect(() => {\n        const loadInitialData = async () => {\n            const timeoutId = setTimeout(() => {\n                setLoadingMessage('Waking up the server... this might take a minute (free tier hosting üòÖ)');\n            }, 3000);\n\n            try {\n                // Fetch game data and leaderboard concurrently\n                const [gameResponse, leaderboardResponse] = await Promise.all([\n                    fetch(`${API_BASE_URL}/api/game/today`),\n                    fetch(`${API_BASE_URL}/api/leaderboard/today`)\n                ]);\n\n                clearTimeout(timeoutId);\n\n                if (!gameResponse.ok) {\n                    const errorData = await gameResponse.json();\n                    throw new Error(errorData.detail || \"Could not load today's game.\");\n                }\n                const gameData = await gameResponse.json();\n                setImageUrl(`${API_BASE_URL}${gameData.imageUrl}`);\n                setTotalWords(gameData.totalWords);\n\n                if (leaderboardResponse.ok) {\n                    const leaderboardData = await leaderboardResponse.json();\n                    setLeaderboard(leaderboardData);\n                }\n            } catch (error) {\n                clearTimeout(timeoutId);\n                setMessage({ text: `Error: ${error.message}`, type: 'error' });\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadInitialData();\n\n        const savedUsername = localStorage.getItem('pixeloUsername');\n        if (savedUsername) setUsername(savedUsername);\n    }, []);\n\n    const handleGuessSubmit = async (e) => {\n        e.preventDefault();\n        if (isInputDisabled || !guess.trim()) return;\n\n        const wordToGuess = guess.trim().toLowerCase();\n\n        if (guessedWords.has(wordToGuess)) {\n            setMessage({ text: 'You already guessed that word!', type: 'error' });\n            setGuess('');\n            return;\n        }\n\n        try {\n            const response = await fetch(`${API_BASE_URL}/api/game/guess`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ word: wordToGuess }),\n            });\n\n            const result = await response.json();\n\n            if (!response.ok) {\n                throw new Error(result.detail || 'Server error occurred.');\n            }\n\n            if (result.status === 'not_in_list') {\n                setMessage({ text: result.message, type: 'error' });\n            } else if (result.status === 'found') {\n                const newGuessCount = guessCount + 1;\n                setGuessCount(newGuessCount);\n                setGuessedWords(new Set(guessedWords).add(wordToGuess));\n\n                const newHistory = [{ word: wordToGuess, rank: result.rank }, ...history];\n                newHistory.sort((a, b) => a.rank - b.rank);\n                setHistory(newHistory);\n\n                setMessage({ text: '', type: 'info' });\n\n                if (result.isCorrect) {\n                    const newSessionId = crypto.randomUUID();\n                    setLastGameSessionId(newSessionId);\n\n                    // Calculate potential rank based on the current leaderboard\n                    const potentialRank = leaderboard.filter(e => e.score <= newGuessCount).length + 1;\n                    setFinalRank(potentialRank);\n\n                    setGameWon(true);\n                    setMessage({ text: `Congratulations! You guessed it in ${newGuessCount} tries!`, type: 'win' });\n                    setShowUsernameModal(true);\n                }\n            }\n        } catch (error) {\n            setMessage({ text: `Error: ${error.message}`, type: 'error' });\n        } finally {\n            setGuess('');\n            inputRef.current.focus();\n        }\n    };\n\n    const handleShare = () => {\n        // Use window.location.origin for a clean URL (e.g., https://pixelo.game)\n        const shareText = `I completed today's Pixelo in ${guessCount} guesses. ‚úèÔ∏è Let's see if you can do it in less!\\n${window.location.origin}`;\n        navigator.clipboard.writeText(shareText).then(() => {\n            setCopyButtonText('Copied!');\n            setTimeout(() => setCopyButtonText('Share'), 2000); // Revert after 2 seconds\n        }).catch(err => {\n            console.error('Failed to copy text: ', err);\n            alert('Could not copy score to clipboard.');\n        });\n    };\n\n    const handleUsernameSubmit = async (e) => {\n        e.preventDefault();\n        const finalUsername = username.trim();\n        if (!finalUsername) return;\n\n        try {\n            const response = await fetch(`${API_BASE_URL}/api/leaderboard/submit`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ username: finalUsername, score: guessCount, sessionId: lastGameSessionId }),\n            });\n            const updatedLeaderboard = await response.json();\n            if (response.ok) {\n                localStorage.setItem('pixeloUsername', finalUsername);\n                setLeaderboard(updatedLeaderboard);\n                setShowUsernameModal(false);\n            } else {\n                throw new Error('Failed to submit score.');\n            }\n        } catch (error) {\n            // In a real app, you'd show this error in the modal\n            console.error(error);\n            alert(error.message);\n        }\n    };\n\n    const getRankColor = useCallback((rank) => {\n        if (rank === 0) return 'var(--rank-win)';\n        if (!totalWords) return 'var(--rank-bad)'; // Default color if totalWords isn't loaded\n\n        const percentile = rank / totalWords;\n\n        if (percentile <= 0.1) return 'var(--rank-good)'; // Top 10%\n        if (percentile <= 0.5) return 'var(--rank-medium)'; // 10% to 50%\n        return 'var(--rank-bad)'; // The rest\n    }, [totalWords]);\n\n    // --- Leaderboard Logic ---\n    const currentUserRank = lastGameSessionId ? leaderboard.findIndex(entry => entry.sessionId === lastGameSessionId) : -1;\n    const top10Leaderboard = leaderboard.slice(0, 10);\n\n    return (\n        <>\n            {showUsernameModal && (\n                <div className=\"modal-overlay\">\n                    <div className=\"modal-content\">\n                        <h2>You won!</h2>\n                        {finalRank && (\n                            <p>Your rank today is <strong className=\"font-numeric highlight-rank\">{finalRank}</strong>!</p>\n                        )}\n                        <p>Add your name to the leaderboard.</p>\n                        <form onSubmit={handleUsernameSubmit}>\n                            <input\n                                type=\"text\"\n                                value={username}\n                                onChange={(e) => setUsername(e.target.value)}\n                                placeholder=\"Enter your name\"\n                                maxLength=\"20\"\n                                required\n                                autoFocus\n                            />\n                            <div className=\"modal-button-group\">\n                                <button type=\"submit\">Submit Score</button>\n                                <button type=\"button\" className=\"share-button\" onClick={handleShare}>\n                                    {copyButtonText}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )}\n            <div className=\"app-layout\">\n                <div className=\"side-column leaderboard-column\">\n                    <h2>Daily Leaderboard</h2>\n                    {leaderboard.length > 0 ? (\n                        <ol className=\"leaderboard-list\">\n                            {top10Leaderboard.map((entry, index) => (\n                                <li key={entry.sessionId || `${entry.username}-${index}`} className={currentUserRank === index ? 'current-user' : ''}>\n                                    <span className=\"leaderboard-rank font-numeric\">{index + 1}.</span>\n                                    <span className=\"leaderboard-name\">{entry.username}{index === 0 && ' üèÜ'}</span>\n                                    <span className=\"leaderboard-score font-numeric\">{entry.score}</span>\n                                </li>\n                            ))}\n                        </ol>\n                    ) : (\n                        <p className=\"no-scores\">No scores yet today. Be the first!</p>\n                    )}\n                </div>\n\n                <div className=\"main-column\">\n                    <div className=\"container\">\n                        <header>\n                            <h1>Pixelo</h1>\n                            <p>Guess the word that inspired this A.I. generated doodle!</p>\n                        </header>\n                        <main>\n                            {loading ? (\n                                <div className=\"loading-container\" style={{ textAlign: 'center', padding: '2rem' }}>\n                                    <p>{loadingMessage}</p>\n                                </div>\n                            ) : (\n                                <>\n                                    <div className=\"image-container\">\n                                        {imageUrl ? <img id=\"doodle-image\" src={imageUrl} alt=\"A.I. generated doodle\" /> : <p>Loading image...</p>}\n                                    </div>\n                                    <div className=\"game-interface\">\n                                        {gameWon ? (\n                                            <button type=\"button\" className=\"share-button-main\" onClick={handleShare}>\n                                                {copyButtonText}\n                                            </button>\n                                        ) : (\n                                            <form id=\"guess-form\" onSubmit={handleGuessSubmit}>\n                                                <input type=\"text\" id=\"guess-input\" ref={inputRef} value={guess} onChange={(e) => setGuess(e.target.value)} placeholder=\"Enter your guess...\" autoComplete=\"off\" required disabled={isInputDisabled} />\n                                                <button type=\"submit\" disabled={isInputDisabled}>Guess</button>\n                                            </form>\n                                        )}\n                                        <div id=\"message-area\" className={`message-${message.type}`}>{message.text}</div>\n                                    </div>\n                                    <div className=\"guess-counter\" style={{ visibility: (guessCount > 0 && !gameWon) ? 'visible' : 'hidden' }}>\n                                        Total Guesses: <span className=\"font-numeric\">{guessCount}</span>\n                                    </div>\n                                </>\n                            )}\n                        </main>\n                    </div>\n                </div>\n\n                <div className=\"side-column history-column\">\n                    <div className=\"history-container\">\n                        <h2>Guess History</h2>\n                        <div className=\"history-header\" style={{ visibility: history.length > 0 ? 'visible' : 'hidden' }}>\n                            <span className=\"col-word\">Guess</span>\n                            <span className=\"col-rank\">Rank</span>\n                        </div>\n                        <ul id=\"history-list\">\n                            {history.map((item) => (\n                                <li key={item.word}><span className=\"history-item-word\"><span className=\"rank-color-indicator\" style={{ backgroundColor: getRankColor(item.rank) }}></span>{item.word}</span><span className=\"history-item-rank font-numeric\" style={{ color: getRankColor(item.rank) }}>{item.rank === 0 ? 'Correct!' : item.rank}</span></li>\n                            ))}\n                        </ul>\n                    </div>\n                </div>\n                <footer>\n                    <p>\n                        <span className=\"footer-icon\" role=\"img\" aria-label=\"heart\">‚ù§Ô∏è</span>\n                        <span>\n                            Inspired by{' '}\n                            <a href=\"https://contexto.me/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                                Contexto\n                            </a>{' '}\n                            and{' '}\n                            <a href=\"https://skribbl.io/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                                skribbl.io\n                            </a>\n                        </span>\n                    </p>\n                </footer>\n            </div>\n        </>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}